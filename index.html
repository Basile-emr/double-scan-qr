
<!DOCTYPE html>
<html>
<head>
  <meta charset='UTF-8'>
  <title>Double Scan QR</title>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
  <style>
    body { font-family: Arial; text-align: center; padding: 20px; }
    button { padding: 15px 25px; font-size: 18px; margin: 10px; }
    #result { font-size: 24px; margin-top: 20px; }
  </style>
</head>
<body>
  <h2>Double Scan QR</h2>
  <button onclick="scanPapier()">Scanner QR Document</button>
  <button onclick="scanColis()">Scanner QR Colis</button>

  <div id="reader" style="width:300px; margin:auto; display:none;"></div>

  <div id="result"></div>

  <script>
    let qrPapier = "";
    let qrColis = "";

    function startScanner(callback) {
      document.getElementById('reader').style.display = 'block';
      const html5QrCode = new Html5Qrcode("reader");
      html5QrCode.start(
        { facingMode: "environment" },
        { fps: 10, qrbox: 250 },
        (decodedText) => {
          html5QrCode.stop();
          document.getElementById('reader').style.display = 'none';
          callback(decodedText.trim());
        }
      );
    }

    function scanPapier() {
      startScanner((text) => {
        qrPapier = text;
        checkMatch();
      });
    }

    function scanColis() {
      startScanner((text) => {
        qrColis = text;
        checkMatch();
      });
    }

    function checkMatch() {
      const res = document.getElementById('result');
      if (!qrPapier || !qrColis) {
        res.textContent = "Scanne les deux QR";
        res.style.color = "gray";
        return;
      }
      if (qrPapier === qrColis) {
        res.textContent = "ðŸŸ¢ OK â€” Identiques";
        res.style.color = "green";
      } else {
        res.textContent = "ðŸ”´ Erreur â€” DiffÃ©rents";
        res.style.color = "red";
      }
    }
  </script>
</body>
</html>
